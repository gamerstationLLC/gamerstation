@import "tailwindcss";

/* =========================================================
   GamerStation Global Theme + Reusable UI Primitives
   Safari/iOS-safe (prevents “pitch black” + weird blur rendering)
   ========================================================= */

:root {
  /* Layers */
  --bg-base: #050505;
  --bg-surface: #121212;
  --bg-raised: #1a1a1a;

  /* Borders */
  --border-subtle: rgba(255,255,255,0.08);
  --border-strong: rgba(255,255,255,0.12);

  /* Text */
  --text-primary: rgba(255,255,255,0.92);
  --text-muted: rgba(255,255,255,0.65);

  /* Accents */
  --accent: #4f8cff;
  --danger: #ff4d4f;

  /* Back-compat */
  --background: var(--bg-base);
  --foreground: var(--text-primary);
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* ✅ Helps Safari form controls + translucency render consistently */
  color-scheme: dark;

  /* =========================================================
     Footer reserve system (FIXED)
     - Default = 0 so you DON'T get a phantom bar.
     - Enable via: html[data-footer-ad="1"]
     - Sticky pages can override --gs-sticky-footer-h (if needed).
     ========================================================= */

  /* Height reserved for footer ad (default OFF) */
  --gs-footer-ad-h: 0px;

  /* Height reserved for any sticky footer UI you may have */
  --gs-sticky-footer-h: 0px;

  /* Bottom space page should reserve (uses the larger of the two) */
  --gs-bottom-reserve: max(var(--gs-footer-ad-h), var(--gs-sticky-footer-h));
}

body {
  background: var(--bg-base);
  color: var(--text-primary);
}

/* === Card primitives (default) === */
.gs-card {
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: 1rem;
}

.gs-panel {
  background: var(--bg-raised);
  border: 1px solid var(--border-subtle);
  border-radius: 0.75rem;
}

.gs-muted {
  color: var(--text-muted);
}

/* =========================================================
   iOS Safari fix: “glass” surfaces that otherwise go pitch black.
   Apply class `ios-glass` to ONLY the elements you want lifted
   (e.g., sticky tabs bar, sticky bottom bar).
   ========================================================= */
@supports (-webkit-touch-callout: none) {
  .ios-glass {
    /* lift off OLED black */
    background-color: rgba(255,255,255,0.06) !important;
    border-color: rgba(255,255,255,0.10) !important;

    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }
}

@media (hover: none) {
  .group:active > div {
    opacity: 1 !important;
  }
}

@layer utilities {
  .gs-title-sweep {
    position: relative;
    --gs-dur: 6.8s;     /* ✅ slower overall cycle */
    --gs-line-h: 3px;
    --gs-gap: 10px;
  }

  /* line expands from CENTER outward */
  .gs-title-sweep::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: calc(var(--gs-gap) * -1);
    height: var(--gs-line-h);
    border-radius: 9999px;

    background: rgba(255, 255, 255, 0.92);
    box-shadow:
      0 0 12px rgba(255,255,255,0.20),
      0 0 28px rgba(255,255,255,0.12);

    /* start hidden */
    opacity: 0;
    transform-origin: center center; /* ✅ center-out */
    transform: scaleX(0);
    will-change: transform, opacity;

    /* ✅ smoother feel: avoid the “ease-in-out pop” at start */
    animation: gs-underline-center var(--gs-dur) linear infinite;
  }

  @keyframes gs-underline-center {
    0% {
      opacity: 0;
      transform: scaleX(0);
    }

    25% {
      opacity: 0;
      transform: scaleX(0);
    }

    30% {
      opacity: 0;
      transform: scaleX(0);
    }
    34% {
      opacity: 1;
      transform: scaleX(0);
    }

    82% {
      opacity: 1;
      transform: scaleX(1);
    }

    90% {
      opacity: 1;
      transform: scaleX(1);
    }

    100% {
      opacity: 0;
      transform: scaleX(0);
    }
  }

  /* Logo glows ONCE near completion of underline */
  .gs-logo-hit {
    --gs-dur: 6.8s; /* ✅ match duration */
    animation: gs-logo-pulse var(--gs-dur) ease-in-out infinite;
    will-change: box-shadow, filter, transform;
  }

  @keyframes gs-logo-pulse {
    0%, 74% {
      filter: saturate(1);
      transform: translateZ(0) scale(1);
      box-shadow: 0 0 40px rgba(0,255,255,0.15);
    }

    84% {
      box-shadow: 0 0 50px rgba(0,255,255,0.22);
    }

    90% {
      filter: saturate(1.18);
      transform: translateZ(0) scale(1.025);
      box-shadow:
        0 0 85px rgba(0,255,255,0.45),
        0 0 22px rgba(255,255,255,0.10);
    }

    95% {
      filter: saturate(1.06);
      transform: translateZ(0) scale(1);
      box-shadow: 0 0 46px rgba(0,255,255,0.20);
    }

    100% {
      filter: saturate(1);
      transform: translateZ(0) scale(1);
      box-shadow: 0 0 40px rgba(0,255,255,0.15);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .gs-title-sweep::after,
    .gs-logo-hit {
      animation: none !important;
    }
  }

  /* =========================================================
     Bottom reserve utilities (use these in layout/pages)
     ========================================================= */

  /* Add to your main wrapper if you want page content to never sit under fixed UI */
  .gs-bottom-reserve {
    padding-bottom: var(--gs-bottom-reserve);
  }

  /* If you render a spacer div at the bottom, use this */
  .gs-footer-ad-space {
    height: var(--gs-footer-ad-h);
  }
}

/* =========================================================
   Enable responsive footer reserve ONLY when footer ad is active
   Set via: document.documentElement.dataset.footerAd = "1"
   ========================================================= */

html[data-footer-ad="1"] {
  --gs-footer-ad-h: 140px;
}

@media (max-width: 640px) {
  html[data-footer-ad="1"] {
    --gs-footer-ad-h: 120px;
  }
}
